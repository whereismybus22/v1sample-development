<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Where is my Bus</title>
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="../css/styles.css" />
    <link rel="stylesheet" href="../css/topbar.css" />
    <link rel="stylesheet" href="../css/help.css" />
    <link rel="stylesheet" href="../css/download.css" />
    <link rel="stylesheet" href="../css/menu.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Manrope&display=swap">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css" />
    <style>
        html,
        body {
            font-family: 'Manrope', sans-serif;
            margin: 0;
            padding: 0;
            color: black;
            font-size: 15px;
            height: 100%;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        header {
            background-color: white;
            padding: 3px;
        }

        .logo-menu {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 3px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
        }

        .logo-menu img.logo {
            width: 30px;
            height: 30px;
            margin-left: 3px;
        }

        .logo-menu img.change {
            width: 111px;
            height: 46px;
        }

        .logo-menu img.settings {
            width: 28px;
            height: 28px;
        }

        .update-from-to {
            font-family: 'Manrope', sans-serif;
            text-align: center;
            padding: 5px;
            font-size: 16px;
            font-weight: bold;
            border-top: 1px solid black;
        }

        .info-panel {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px;
            border-bottom: 1px solid #919191;
        }

        .info-item {
            display: flex;
            align-items: center;
            border: 1px solid black;
            padding: 5px;
            margin: 5px;
            border-radius: 5px;
            color: black;
            font-family: 'Manrope', sans-serif;
            font-size: 12px;
        }

        .info-item img {
            margin-right: 5px;
        }

        .map-section {
            flex: 1;
            display: flex;
        }

        #map {
            border-top: 1px solid black;
            width: 100%;
            height: 100%;
        }

        #layerButton {
            position: fixed;
            right: 6px;
            z-index: 1000;
            margin-top: 10px;
        }

#info-btn {
  position: absolute;
}

        #layerButton.active {
            padding: 0px;
        }

        .set-user-bus-button {
            position: fixed;
            right: 6px;
            z-index: 1000;
            margin-top: 100px;
        }

        .refresh-button {
            position: fixed;
            right: 6px;
            z-index: 1000;
            margin-top: 55px;
        }

        .directions-toGoogleMap {
            position: fixed;
            right: 6px;
            z-index: 1000;
            margin-top: 145px;
        }

        .bus-miss {
            position: fixed;
            right: 6px;
            z-index: 1000;
            margin-top: 190px;
        }


        .info-toggle-btn.expanded {
            width: 340px;
            border-top-left-radius: 0px;
            border-bottom-left-radius: 0px;
            border-top-right-radius: 10px;
            border-bottom-right-radius: 10px;
        }

        .info-text-wrapper {
            overflow: hidden;
            flex-grow: 1;
            max-width: 0;
            opacity: 0;
            transition: max-width 0.3s ease, opacity 0.3s ease;
        }

        .info-toggle-btn.expanded .info-text-wrapper {
            max-width: 300px;
            opacity: 1;
        }

        .info-text {
            white-space: nowrap;
            font-size: 14px;
            color: #333;
            font-family: "Manrope", sans-serif;
            margin-right: 3px;
            display: inline-block;
            margin-left: 10px;
        }

        .arrow-icon {
            position: absolute;
            transition: opacity 0.3s ease;
            opacity: 0;
            z-index: 2;
        }

        .left-arrow {
            opacity: 1;
        }

        .info-toggle-btn.expanded .left-arrow {
            opacity: 0;
        }

        .info-toggle-btn.expanded .right-arrow {
            opacity: 1;
        }


        .icon-wrapper {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: auto;
        }

        .info-toggle-btn {
            position: fixed;
            left: 6px;
            
            z-index: 1000;
            display: flex;
            align-items: center;
            height: 35px;
            width: 60px;
            background-color: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            border: none;
            cursor: pointer;
            overflow: hidden;
            transition: width 0.3s ease, border-radius 0.3s ease;
            padding: 0;
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
            border-top-right-radius: 10px;
            border-bottom-right-radius: 10px;
            justify-content: center;
            margin-left: -20px;
        }

        .floating-button {
            position: fixed;
            right: 0;
            margin-top: 145px;
            transform: translateY(calc(50px + 5px));
            background-color: #3D408A;
            color: white;
            padding: 3px 12px;
            border-radius: 8px 0 0 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }

        .follow-marker-button {
            position: fixed;
            bottom: 20px;
            right: 10px;
            background: yellow;
            border-radius: 50%;
            padding: 10px;
            z-index: 1000;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: solid;
            border-color: #252525;
        }

        .follow-marker-button img {
            width: 30px;
            height: 30px;
        }

        .speed-indicator {
            position: fixed;
            bottom: 18px;
            left: 10px;
            background: white;
            border-radius: 50%;
            padding: 10px;
            z-index: 1000;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: solid;
            border-color: #252525;
        }

        .speed-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            line-height: 1;
            text-align: center;
            font-weight: bold;
        }

        .speed-number {
            font-size: 16px;
        }

        .speed-unit {
            font-size: 10px;
        }


        .button-content {
            display: flex;
            align-items: center;
        }

        #buttonText {
            font-size: 18px;
            margin-right: 5px;
            font-weight: bold;

        }

        .toggle-content {
            display: none;
            align-items: center;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 38px;
            height: 20px;
            margin-left: 5px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.4s;
            border-radius: 20px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
        }

        input:checked+.slider {
            background-color: #DDB948;
        }

        input:checked+.slider:before {
            transform: translateX(18px);
        }

        .floating-button.expanded {
            width: auto;
        }

        .floating-button.expanded .toggle-content {
            display: flex;
        }

        .toggle-content span {
            margin-right: 5px;
            font-size: 14px;
            font-weight: bold;
        }


        .tracker-title {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .tracker-subtitle {
            font-size: 13px;
            color: #3D408A;
            font-weight: 800;
            font-family: "Manrope", sans-serif;
        }

        .tracker-route {
            font-size: 20px;
            color: #000000;
            margin-top: 0;
        }

        #menuBtn svg {
            width: 25px;
            height: 25px;
            margin-right: 3px;
        }

        .wrapper {
            display: flex;
            justify-content: flex-end;
        }

        .control-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: white;
            border: none;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }

        .info-item2 {
            padding: 3px;
            margin: 5px;
            color: #919191;
            font-weight: 700;
            font-family: 'Manrope', sans-serif;
            font-size: 11px;
            margin-top: 3px;
            display: flex;
            justify-content: left;
            align-items: center;
        }

        .location-icon {
            margin-right: 10px;
        }
        .wrapper2 {
    display: flex;
    flex-direction: column; 
    align-items: flex-start;
}

    </style>
</head>

<body>
    <header>
        <div class="logo-menu">
            <img id="indexBtn" class="logo" src="../assets/images/AppLogo.png" alt="Logo" onclick="">
            <div class="tracker-title">
                <span class="tracker-subtitle">Tracking</span>
                <strong class="tracker-route" id="routeNumber">Route -</strong>
            </div>
            <div id="menuBtn" class="tracker-filter-icon" onclick="openSettings()">
                <svg xmlns="http://www.w3.org/2000/svg" fill="#2b2e83" viewBox="0 0 16 16">
                    <path stroke="black" stroke-width="0.5" fill-rule="evenodd"
                        d="M0 10.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 0-1H3V1.5a.5.5 0 0 0-1 0V10H.5a.5.5 0 0 0-.5.5M2.5 12a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 1 0v-2a.5.5 0 0 0-.5-.5m3-6.5A.5.5 0 0 0 6 6h1.5v8.5a.5.5 0 0 0 1 0V6H10a.5.5 0 0 0 0-1H6a.5.5 0 0 0-.5.5M8 1a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 1 0v-2A.5.5 0 0 0 8 1m3 9.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 0-1H14V1.5a.5.5 0 0 0-1 0V10h-1.5a.5.5 0 0 0-.5.5m2.5 1.5a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 1 0v-2a.5.5 0 0 0-.5-.5" />
                </svg>
            </div>

        </div>
        <div id="bus-info-wrapper" style="display: none;">
            <div class="info-panel">
                <div class="info-item">
                    <img src="../img/distance.svg" alt="Distance" style="height: 22px; width: 22px;">
                    <span id="distance">Loading...</span>
                </div>
                <div class="info-item">
                    <img src="../img/time.svg" alt="Time" style="height: 22px; width: 22px;">
                    <span id="time">Loading...</span>
                </div>
                <div class="info-item">
                    <img src="../img/speed.svg" alt="Speed" style="height: 22px; width: 22px;">
                    <span id="speed">Loading...</span>
                </div>
            </div>
        </div>
        <div class="info-item2">
            <img src="../assets/images/location.svg" style="height: 25px; width: 25px" alt="Location Icon"
                class="location-icon" />
            <span id="location" class="location-address">Fetching address...</span>
        </div>

    </header>

<div class="map-section">
    <div id="map" class="wrapper">
        <div class="wrapper2" style="display: flex; justify-content: space-between; width: 100%;">
            <div id="info-btn" class="info-toggle-btn">
                <span class="info-text-wrapper">
                    <span class="info-text">
                        <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank">Click Here</a> to Know
                        How to SetUp BusStop!
                    </span>
                </span>
                <span class="icon-wrapper">
                    <img src="../assets/images/left_expansion_icon.svg" class="arrow-icon right-arrow" height="24"
                        width="24" alt="">
                    <img src="../assets/images/right-arrow.png" class="arrow-icon left-arrow" height="24" width="24"
                        alt="">
                </span>
            </div>
            <div id="layerButton" class="control-btn" onclick="toggleMapLayer()">
                <img id="layerButtonImg" src="../img/toSatellite.svg" height="25" width="25" alt="Layers">
            </div>
        </div>
        <div class="wrapper">
            <div class="refresh-button control-btn">
                <img id="refresh" src="../assets/images/refresh_page_icon.png" height="25" width="25"
                    alt="Set User Bus">
            </div>
        </div>
        <div class="wrapper">
            <div class="set-user-bus-button control-btn" onclick="setUserBus()">
                <img src="../img/follow_user.png" height="25" width="25" alt="Set User Bus">
            </div>
        </div>
        <div class="wrapper">
            <div class="directions-toGoogleMap control-btn">
                <img id="directionsGoogleMap" src="../img/directions.png" height="25" width="25"
                    alt="Directions To Google Map ">
            </div>
        </div>
        <div class="wrapper">
            <div class="bus-miss control-btn">
                <img id="busMiss" src="../img/busMiss.png" height="25" width="25" alt="Buss Miss ">
            </div>
        </div>
    </div>
</div>


    <div class="follow-marker-button" onclick="toggleFollowMarker()">
        <img src="../img/follow.svg" alt="Follow Marker">
    </div>
    <div id="speed-container" style="display: none;">
        <div class="speed-indicator">
            <div class="speed-content">
                <span class="speed-number" id="speed-value">-</span>
                <span class="speed-unit">Kmph</span>
            </div>
        </div>
    </div>

</body>

<div id="floatingMenu" class="floating-menu hidden">
    <div class="menu-header">
        <img src="../assets/images/where-is-my-bus.svg" alt="Where is my Bus?" class="menu-logo" />
        <button class="close-menu" id="closeMenuBtn">×</button>
    </div>
    <ul class="menu-items">
        <li style="user-select: none;">
            <a href="../pages/fullMap.html"
                style="text-decoration: none; color: inherit; display: flex; align-items: center;"><svg width="20"
                    height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M3.7 13C2.03377 13.6353 1 14.5205 1 15.4997C1 17.4329 5.02944 19 10 19C14.9706 19 19 17.4329 19 15.4997C19 14.5205 17.9662 13.6353 16.3 13M10 7H10.01M16 7C16 11.0637 11.5 13 10 16C8.5 13 4 11.0637 4 7C4 3.68629 6.68629 1 10 1C13.3137 1 16 3.68629 16 7ZM11 7C11 7.55228 10.5523 8 10 8C9.4477 8 9 7.55228 9 7C9 6.44772 9.4477 6 10 6C10.5523 6 11 6.44772 11 7Z"
                        stroke="#3D408A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                <p>Full map</p>
            </a>
        </li>

        <li style="user-select: none;">
            <a href="../pages/Allroutes.html"
                style="text-decoration: none; color: inherit; display: flex; align-items: center;">
                <svg width="20" height="20" viewBox="0 0 26 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M20.0154 12.8673C21.0863 12.8673 21.9544 11.9992 21.9544 10.9283C21.9544 9.85748 21.0863 8.98938 20.0154 8.98938C18.9446 8.98938 18.0765 9.85748 18.0765 10.9283C18.0765 11.9992 18.9446 12.8673 20.0154 12.8673Z"
                        fill="#3D408A" />
                    <path
                        d="M5.76747 7.31236C6.83569 7.23642 7.6401 6.3089 7.56416 5.24068C7.48823 4.17245 6.56071 3.36804 5.49248 3.44398C4.42426 3.51991 3.61985 4.44743 3.69579 5.51566C3.77172 6.58388 4.69924 7.38829 5.76747 7.31236Z"
                        fill="#3D408A" />
                    <path
                        d="M23.9352 7.18001C23.4218 6.66343 22.8112 6.25348 22.1388 5.97373C21.4663 5.69398 20.7452 5.54996 20.0168 5.54996C19.2885 5.54996 18.5674 5.69398 17.8949 5.97373C17.2224 6.25348 16.6119 6.66343 16.0985 7.18001C15.1011 8.18236 14.4981 9.51041 14.4 10.921C14.3055 12.2434 14.7245 13.612 15.5819 14.7783L17.3017 17.0755C16.4208 16.8053 15.8623 16.9875 15.4135 17.134C15.0107 17.2656 14.7197 17.3606 14.1529 17.1856C13.5772 17.008 13.3566 16.7411 13.0775 16.403C12.7661 16.0262 12.3786 15.5566 11.5035 15.2867C10.6193 15.014 10.0594 15.1968 9.60968 15.3437C9.20665 15.4751 8.91595 15.5701 8.34926 15.3953C7.77351 15.2177 7.553 14.9507 7.27386 14.6128C7.09067 14.3906 6.87974 14.1368 6.55946 13.9103L10.0672 9.22455C10.9221 8.06185 11.3409 6.69324 11.2465 5.37174C11.1485 3.9609 10.5456 2.63257 9.54812 1.63C9.03468 1.11344 8.42416 0.703491 7.7517 0.423752C7.07923 0.144012 6.35809 0 5.62976 0C4.90143 0 4.18029 0.144012 3.50782 0.423752C2.83536 0.703491 2.22484 1.11344 1.7114 1.63C0.714134 2.63232 0.111242 3.96029 0.0130963 5.3708C-0.0813788 6.69319 0.337609 8.0618 1.195 9.22832L4.77935 14.0163C4.87366 14.1428 4.99498 14.2466 5.13449 14.3203C5.20005 14.404 5.28966 14.4656 5.39127 14.4968C5.96702 14.6745 6.18753 14.9414 6.46666 15.2794C6.77804 15.6563 7.16562 16.1258 8.04066 16.3958C8.9249 16.6686 9.48474 16.4858 9.93456 16.3389C10.3373 16.2073 10.6283 16.1123 11.1949 16.2872C11.7707 16.4648 11.9912 16.7317 12.2703 17.0698C12.5817 17.4466 12.9693 17.9162 13.8443 18.1861C14.7289 18.4589 15.2885 18.2762 15.7384 18.1292C16.1411 17.9978 16.4321 17.9028 16.9989 18.0776C17.5746 18.2553 17.7954 18.5225 18.0745 18.8602C18.3859 19.2371 18.7736 19.7067 19.6487 19.9766C19.7356 20.0037 19.8282 20.0073 19.9169 19.9871C19.9499 19.9901 19.983 19.9923 20.0164 19.9923C20.1816 19.993 20.3446 19.9548 20.4924 19.8809C20.6401 19.8069 20.7683 19.6993 20.8668 19.5666L24.4538 14.7749C25.3087 13.6122 25.7276 12.2437 25.6331 10.9222C25.5354 9.51123 24.9326 8.18272 23.9352 7.18001ZM5.62973 8.36401C4.94177 8.36157 4.27592 8.12082 3.74547 7.68273C3.21502 7.24465 2.85277 6.63629 2.72035 5.96119C2.58793 5.28609 2.69354 4.58596 3.01919 3.97995C3.34484 3.37395 3.87042 2.8995 4.50648 2.63736C5.14254 2.37522 5.84979 2.34158 6.50786 2.54217C7.16594 2.74276 7.73417 3.16517 8.11587 3.73754C8.49757 4.3099 8.66914 4.99685 8.6014 5.68147C8.53365 6.36609 8.23077 7.00608 7.7443 7.49254C7.46698 7.77041 7.13729 7.99052 6.77432 8.1401C6.41135 8.28969 6.02232 8.3658 5.62973 8.36401ZM22.131 13.0425C21.6415 13.5354 20.9962 13.8432 20.3051 13.9134C19.6141 13.9835 18.9201 13.8118 18.3415 13.4274C17.7629 13.043 17.3357 12.4697 17.1326 11.8055C16.9295 11.1412 16.9631 10.427 17.2278 9.7848C17.4925 9.14258 17.9718 8.6121 18.584 8.28383C19.1962 7.95557 19.9033 7.84987 20.5847 7.98476C21.2661 8.11965 21.8796 8.48678 22.3205 9.02352C22.7614 9.56026 23.0025 10.2334 23.0025 10.928C23.0043 11.3206 22.9282 11.7096 22.7786 12.0726C22.629 12.4355 22.4089 12.7652 22.131 13.0425Z"
                        fill="#3D408A" />
                </svg>
                <p> All routes</p>
            </a>
        </li>

        <li style="user-select: none;">
            <a href="../pages/DefaultBusMenu.html"
                style="text-decoration: none; color: inherit; display: flex; align-items: center;">
                <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M18.3802 19.1012V20.7667C18.3803 20.8672 18.3605 20.9669 18.3221 21.0598C18.2836 21.1527 18.2273 21.237 18.1562 21.3081C18.0851 21.3791 18.0005 21.4354 17.9076 21.4738C17.8146 21.5121 17.7151 21.5319 17.6145 21.5317H16.0832C15.9826 21.5319 15.883 21.5121 15.7901 21.4738C15.6972 21.4354 15.6127 21.3791 15.5416 21.3081C15.4705 21.237 15.414 21.1527 15.3756 21.0598C15.3371 20.9669 15.3174 20.8672 15.3175 20.7667V19.1012M6.51451 19.1012V20.7667C6.51461 20.8672 6.4949 20.9669 6.45645 21.0598C6.418 21.1527 6.36159 21.237 6.29046 21.3081C6.21933 21.3791 6.13488 21.4354 6.04194 21.4738C5.949 21.5121 5.84933 21.5319 5.74879 21.5317H4.21743C4.11689 21.5319 4.01731 21.5121 3.92437 21.4738C3.83143 21.4354 3.74699 21.3791 3.67586 21.3081C3.60473 21.237 3.54832 21.1527 3.50986 21.0598C3.47141 20.9669 3.4517 20.8672 3.4518 20.7667V19.1012"
                        fill="#3D408A" />
                    <path
                        d="M19.9108 19.1925H1.92045V2.41921C1.92024 2.16256 1.97067 1.90846 2.06893 1.67138C2.16719 1.43429 2.31127 1.21892 2.49296 1.03767C2.67465 0.856411 2.89039 0.712757 3.12772 0.615066C3.36504 0.517376 3.61929 0.467572 3.87593 0.468394H17.9553C18.2119 0.467572 18.4662 0.517376 18.7035 0.615066C18.9408 0.712757 19.1565 0.856411 19.3382 1.03767C19.5199 1.21892 19.664 1.43429 19.7623 1.67138C19.8605 1.90846 19.911 2.16256 19.9108 2.41921V19.1925Z"
                        fill="#3D408A" />
                    <path d="M1.16957 15.2986H20.6625V17.6377H1.16957V15.2986Z" fill="#3D408A" />
                    <path
                        d="M2.37967 4.4457H10.8006V12.2429H2.37967V4.4457ZM11.0719 4.4457H19.2995V12.2429H11.0719V4.4457Z"
                        fill="white" />
                    <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M1.92045 3.90696V4.68667H19.9038V3.90696H1.92045ZM1.92045 11.9443V12.724H19.9241V11.9443H1.92045Z"
                        fill="#3D408A" />
                    <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M3.21709 13.4756V14.2553H5.55624V13.4756H3.21709ZM16.2321 13.4756V14.2553H18.5713V13.4756H16.2321Z"
                        fill="white" />
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M10.5262 4.22657V12.2577H11.3059V4.22657H10.5262Z"
                        fill="#3D408A" />
                    <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M0 5.44221V8.70375H0.779716V6.22193H1.94929V5.44221H0ZM19.8828 5.44221V6.22193H21.0523V8.70375H21.832V5.44221H19.8828Z"
                        fill="#3D408A" />
                    <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M1.92045 4.22657V12.2577H2.70017V4.22657H1.92045ZM19.1443 4.22657V12.2577H19.9241V4.22657H19.1443Z"
                        fill="#3D408A" />
                </svg>
                <p> Default bus</p>
            </a>
        </li>

        <li style="user-select: none;">
            <a href="../pages/DefaultBusstopMenu.html"
                style="text-decoration: none; color: inherit; display: flex; align-items: center;">
                <svg width="21" height="26" viewBox="0 0 21 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path opacity="0.71"
                        d="M10.2069 20.5602C15.844 20.5602 20.4138 15.9905 20.4138 10.3534C20.4138 4.71626 15.844 0.146484 10.2069 0.146484C4.56977 0.146484 0 4.71626 0 10.3534C0 15.9905 4.56977 20.5602 10.2069 20.5602Z"
                        fill="white" />
                    <path
                        d="M19.1521 10.3529C19.1521 5.41133 15.1468 1.4082 10.2074 1.4082C5.26801 1.4082 1.2627 5.41133 1.2627 10.3529C1.2627 15.0276 4.84801 18.8623 9.41988 19.2626V25.8535H10.9971V19.2626C15.5668 18.8623 19.1543 15.0276 19.1543 10.3529H19.1521Z"
                        fill="#3D408A" />
                    <path
                        d="M13.9211 7.80946C13.9211 7.64539 13.9079 7.48571 13.8664 7.32602C13.7307 6.80321 13.3764 6.48602 12.8951 6.28914C12.287 6.03977 11.6439 5.98727 10.9964 5.95883C10.2767 5.92602 9.55918 5.93039 8.84168 5.99821C8.38887 6.03977 7.94262 6.11633 7.51606 6.28914C6.85106 6.56039 6.49668 7.05258 6.49449 7.75258C6.49012 9.32758 6.49012 10.9026 6.49449 12.4776C6.49449 12.8451 6.64324 13.1579 6.89699 13.4182C6.93855 13.462 6.95824 13.5013 6.95605 13.5626C6.95387 13.941 6.95606 14.3173 6.95387 14.6957C6.95387 14.7482 6.9648 14.7679 7.02168 14.7679C7.44168 14.7657 7.86168 14.7657 8.28168 14.7679C8.33856 14.7679 8.34949 14.7482 8.34949 14.6957C8.3473 14.4354 8.34949 14.1751 8.34731 13.9148C8.34731 13.8513 8.3648 13.8338 8.42824 13.8338C9.61387 13.8338 10.7973 13.8338 11.9829 13.8338C12.0486 13.8338 12.0639 13.8535 12.0617 13.917C12.0573 14.1751 12.0617 14.431 12.0595 14.6891C12.0595 14.7526 12.0748 14.7701 12.1382 14.7701C12.5517 14.7679 12.9651 14.7679 13.3786 14.7701C13.4442 14.7701 13.4595 14.7504 13.4595 14.6891C13.4573 14.3238 13.4595 13.9607 13.4573 13.5954C13.4573 13.5145 13.4792 13.4576 13.5361 13.3985C13.7876 13.1338 13.9211 12.8188 13.9211 12.4491C13.9211 11.6682 13.9211 10.8873 13.9211 10.1063C13.9211 9.32539 13.9211 8.57727 13.9211 7.81164V7.80946ZM8.11105 12.9085C7.72387 12.9041 7.4198 12.5891 7.42418 12.1976C7.42855 11.8148 7.73699 11.5151 8.12637 11.5173C8.50918 11.5195 8.81762 11.8301 8.81543 12.2129C8.81543 12.5957 8.49387 12.9107 8.11105 12.9063V12.9085ZM12.2957 12.9085C11.9129 12.9085 11.5936 12.5848 11.6001 12.2041C11.6067 11.8191 11.9173 11.5151 12.3001 11.5195C12.6895 11.5216 13.0045 11.8388 12.9957 12.2195C12.987 12.6001 12.6742 12.9107 12.2957 12.9085ZM12.9979 10.0254C12.9979 10.1041 12.9739 10.1195 12.8995 10.1195C12.0004 10.1173 11.1036 10.1195 10.2045 10.1195C9.30543 10.1195 8.42168 10.1195 7.52918 10.1216C7.4373 10.1216 7.41981 10.0932 7.42199 10.0101C7.42637 9.30789 7.42418 8.60352 7.42199 7.90133C7.42199 7.82039 7.44168 7.79852 7.52262 7.79852C9.31199 7.80071 11.1036 7.80071 12.8929 7.79852C12.9717 7.79852 12.9979 7.81383 12.9979 7.89914C12.9936 8.60789 12.9936 9.31883 12.9979 10.0276V10.0254Z"
                        fill="white" />
                </svg>
                <p> Default bus stop</p>
            </a>
        </li>

        <li id="contactdriverBtn" style="user-select: none;">
            <a href="../pages/drivercontact.html"
                style="text-decoration: none; color: inherit; display: flex; align-items: center;">
                <svg style="margin-right: 0.1rem;" width="18" height="26" viewBox="0 0 20 26" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M9.975 11.6589C11.1024 11.6589 12.2044 11.3442 13.1418 10.7547C14.0791 10.1653 14.8097 9.32741 15.2411 8.34714C15.6725 7.36686 15.7854 6.2882 15.5655 5.24755C15.3455 4.2069 14.8027 3.251 14.0055 2.50073C13.2084 1.75046 12.1927 1.23953 11.087 1.03253C9.98132 0.825529 8.83524 0.931768 7.7937 1.33781C6.75217 1.74385 5.86195 2.43146 5.23562 3.31368C4.6093 4.1959 4.275 5.23311 4.275 6.29415C4.275 7.71696 4.87553 9.08149 5.94449 10.0876C7.01345 11.0936 8.46327 11.6589 9.975 11.6589ZM18.525 25.0706C18.9029 25.0706 19.2654 24.9293 19.5326 24.6778C19.7999 24.4263 19.95 24.0851 19.95 23.7294C19.95 21.2395 18.8991 18.8516 17.0284 17.091C15.1577 15.3303 12.6205 14.3412 9.975 14.3412C7.32947 14.3412 4.79229 15.3303 2.92161 17.091C1.05093 18.8516 3.94215e-08 21.2395 0 23.7294C0 24.0851 0.150134 24.4263 0.417373 24.6778C0.684612 24.9293 1.04707 25.0706 1.425 25.0706H18.525Z"
                        fill="#3D408A" />
                </svg>
                <p>Contact driver</p>
            </a>
        </li>

        <li id="menucontactusButton" style="user-select: none;">
            <a href="../pages/contactus.html"
                style="text-decoration: none; color: inherit; display: flex; align-items: center;">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M17.5211 11.0289C17.3003 11.0289 17.0694 10.9586 16.8487 10.9084C16.4015 10.8099 15.9621 10.6791 15.5339 10.517C15.0683 10.3476 14.5566 10.3564 14.0971 10.5417C13.6376 10.727 13.2629 11.0757 13.045 11.5206L12.8242 11.9722C11.8467 11.4285 10.9485 10.7531 10.1546 9.96504C9.36656 9.17121 8.69119 8.27296 8.14742 7.29546L8.56893 7.01445C9.01389 6.79658 9.36256 6.42185 9.54784 5.96236C9.73312 5.50287 9.74191 4.9911 9.57253 4.52551C9.41318 4.09639 9.28243 3.65719 9.18113 3.21079C9.13095 2.99 9.0908 2.75917 9.0607 2.52834C8.93882 1.82142 8.56855 1.18125 8.01657 0.723101C7.46458 0.264954 6.76716 0.0189426 6.04989 0.0293712H3.03908C2.60656 0.0253101 2.17824 0.11449 1.78328 0.29084C1.38832 0.46719 1.036 0.72657 0.750291 1.05132C0.464586 1.37607 0.252207 1.75857 0.127613 2.17278C0.00301953 2.58699 -0.0308643 3.02318 0.0282687 3.45166C0.562926 7.65613 2.48311 11.5627 5.48551 14.5542C8.48792 17.5457 12.4014 19.4516 16.6078 19.971H16.9892C17.7292 19.972 18.4438 19.7005 18.9964 19.2082C19.3139 18.9242 19.5675 18.5761 19.7405 18.1869C19.9135 17.7976 20.0019 17.3761 20 16.9501V13.9393C19.9877 13.2422 19.7338 12.5709 19.2817 12.0402C18.8296 11.5094 18.2073 11.1519 17.5211 11.0289ZM18.0229 17.0505C18.0227 17.193 17.9922 17.3338 17.9333 17.4636C17.8745 17.5934 17.7887 17.7091 17.6816 17.8032C17.5695 17.9 17.4384 17.9723 17.2967 18.0155C17.1549 18.0587 17.0058 18.0719 16.8587 18.0541C13.1001 17.5722 9.6089 15.8527 6.93578 13.1668C4.26267 10.481 2.55977 6.98167 2.09569 3.22083C2.07972 3.07382 2.09372 2.9251 2.13684 2.78365C2.17996 2.6422 2.25132 2.51097 2.34659 2.39787C2.44064 2.29082 2.55641 2.20502 2.68619 2.14619C2.81597 2.08735 2.9568 2.05683 3.09929 2.05665H6.1101C6.34349 2.05146 6.57138 2.12778 6.75456 2.27249C6.93774 2.41721 7.06474 2.62125 7.11371 2.8495C7.15385 3.12381 7.20403 3.39479 7.26425 3.66241C7.38018 4.19146 7.53448 4.71136 7.7259 5.218L6.32086 5.87034C6.20073 5.92546 6.09266 6.00377 6.00288 6.10076C5.91309 6.19776 5.84335 6.31154 5.79765 6.43556C5.75196 6.55959 5.73121 6.69142 5.73661 6.82348C5.74201 6.95555 5.77343 7.08525 5.82909 7.20513C7.27348 10.299 9.76045 12.786 12.8543 14.2304C13.0987 14.3307 13.3727 14.3307 13.6171 14.2304C13.7422 14.1856 13.8572 14.1164 13.9554 14.0268C14.0536 13.9372 14.1331 13.829 14.1891 13.7085L14.8113 12.3034C15.3302 12.489 15.8597 12.6431 16.397 12.7651C16.6647 12.8253 16.9356 12.8755 17.21 12.9156C17.4382 12.9646 17.6422 13.0916 17.787 13.2748C17.9317 13.458 18.008 13.6859 18.0028 13.9192L18.0229 17.0505Z"
                        fill="#3D408A" />
                </svg>
                <p class="list-text">Contact us</p>
            </a>
        </li>

        <li id="installAppOption" style="user-select: none;">
            <a href="../pages/index.html"
                style="text-decoration: none; color: inherit; display: flex; align-items: center;">
                <svg width="24" height="27" viewBox="0 0 24 27" fill="none" xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink">
                    <mask id="mask0_293_20271" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="24"
                        height="27">
                        <rect width="23.7129" height="26.7129" fill="url(#pattern0_293_20271)" />
                    </mask>
                    <g mask="url(#mask0_293_20271)">
                        <rect x="0.669922" y="1.96729" width="23.3738" height="21.7042" fill="#3D408A" />
                    </g>
                    <defs>
                        <pattern id="pattern0_293_20271" patternContentUnits="objectBoundingBox" width="1" height="1">
                            <use xlink:href="#image0_293_20271"
                                transform="matrix(0.00220022 0 0 0.00195312 -0.0632567 0)" />
                        </pattern>
                        <image id="image0_293_20271" width="512" height="512" preserveAspectRatio="none"
                            xlink:href="data:image/png;base64,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" />
                    </defs>
                </svg>
                <p class="list-text">Install web app</p>
            </a>
        </li>
    </ul>

    <ul class="secondarymenu-items" style="margin-top: auto;">
        <li style="user-select: none;"><a href="#" onclick="openTutorial()"
                style="text-decoration: none; color: inherit; display: flex; align-items: center;">
                <i class="bi bi-youtube"></i>
                <p> Quick Tutorial Video</p>
        </li></a>
        <li style="user-select: none;"><a href="#" onclick="shareApp()"
                style="text-decoration: none; color: inherit; display: flex; align-items: center;">
                <i class="bi bi-share-fill"></i>
                <p>Share App</p>
        </li></a>
        <li style="user-select: none;"><a href="../pages/contactus.html"
                style="text-decoration: none; color: inherit; display: flex; align-items: center;">
                <i class="bi bi-card-text"></i>
                <p>Suggest a feature</p>
        </li></a>
    </ul>
    <div class="socials">
        <p class="follow-text">Follow us</p>
        <div class="icons">
            <a href="https://www.instagram.com/whereismybus_track/" target="_blank">
                <i class="bi bi-instagram" style="color:#252525;"></i>
            </a>
            <a href=" https://x.com/whereismybus22" target="_blank">
                <i class="bi bi-twitter-x" style="color: #252525;"></i>
            </a>
            <a href="https://www.youtube.com/@WhereismyBus_Track" target="_blank">
                <i class="bi bi-youtube" style="color: #252525;"></i>
            </a>
            <a href=" https://www.linkedin.com/in/WhereismyBus/" target="_blank">
                <i class="bi bi-linkedin" style="color: #252525;"></i>
            </a>
            <a href="https://whatsapp.com/channel/0029Vb5RZ9e4IBh9oKx6301O" target="_blank">
                <i class="bi bi-whatsapp" style="color: #252525;"></i>
            </a>
        </div>
    </div>
</div>
<script src="../js/isIOS.js"></script>
<script src="../js/menu.js"></script>
<script src="../js/indexback.js"></script>
<script src="../js/menucontactus.js"></script>
<script src="../js/share.js"></script>
<script src="../js/tutorialvideo.js"></script>
<script src="../js/standalone.js"></script>
<script src="../js/watchPosition.js"></script>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>
<script>
    const allRoutes = [
        ["route1", "Route 1", 477],
        ["route2", "Route 2", 477],
        ["route3", "Route 3", 477],
        ["route4", "Route 4", 477],
        ["route5", "Route 5", 477],
        ["route6", "Route 6", 477],
        ["route7", "Route 7", 477],
        ["route8", "Route 8", 477],
        ["route9", "Route 9", 477],
        ["route10", "Route 10", 477],
        ["route11", "Route 11", 477],
        ["route12", "Route 12", 477],
        ["route13", "Route 13", 477],
        ["route14", "Route 14", 477],
        ["route15", "Route 15", 477],
        ["route16", "Route 16", 477],
        ["route17", "Route 17", 477],
        ["route18", "Route 18", 477],
        ["route19", "Route 19", 477],
        ["route20", "Route 20", 477],
        ["route21", "Route 21", 477],
        ["route22", "Route 22", 477],
        ["route23", "Route 23", 477],
        ["route24", "Route 24", 477]
    ];
    const thisRoute = localStorage.getItem('thisRoute');
    const matchedRoute = allRoutes.find(routeArr => routeArr[0] === thisRoute);

    const thisRouteDisplayName = matchedRoute ? matchedRoute[1] : null;
    const thisRouteID = matchedRoute ? matchedRoute[2] : null;

    if (thisRouteDisplayName) {
        document.getElementById('routeNumber').textContent = thisRouteDisplayName;
    } else {
        document.getElementById('routeNumber').textContent = 'Route -'; // Default 
    }
    let isUserBusSet = false;  // Variable to keep track of toggle state
    let userLocationMarker;    // Variable to store the user location marker

    // Custom icon for the user's location marker
    const userLocationIcon = L.icon({
        iconUrl: '../img/deviceLocation.svg',
        iconSize: [30, 30], // size of the icon
        iconAnchor: [15, 15], // point of the icon which will correspond to marker's location
        popupAnchor: [0, -15] // point from which the popup should open relative to the iconAnchor
    });

    function setUserBus() {
        if (isUserBusSet == false) {
            if (localStorage.getItem('userDeviceLocation')) {
                 // Toggle the state
                isUserBusSet = true;

                const bounds = L.latLngBounds([
                    [JSON.parse(localStorage.getItem('userDeviceLocation')).latitude, JSON.parse(localStorage.getItem('userDeviceLocation')).longitude],
                    presentBusLocation
                ]);

                // Set user bus
                polyline.setStyle({ weight: 0 });
                map.once("zoomend", function () {
                    polyline.setStyle({ weight: 3 });
                });
                map.flyToBounds(bounds, { padding: [40, 80, 40, 40] });

                document.querySelector('.set-user-bus-button img').src = "../img/follow_user_not.png";
                document.querySelector(".follow-marker-button").style.backgroundColor = "yellow";

                shouldFollowMarker = false;

                // Add or update user location marker with custom icon
                if (userLocationMarker) {
                    userLocationMarker.setLatLng([JSON.parse(localStorage.getItem('userDeviceLocation')).latitude, JSON.parse(localStorage.getItem('userDeviceLocation')).longitude]).update();
                } else {
                    userLocationMarker = L.marker([JSON.parse(localStorage.getItem('userDeviceLocation')).latitude, JSON.parse(localStorage.getItem('userDeviceLocation')).longitude], { icon: userLocationIcon }).addTo(map);
                }
                userLocationMarker.bindPopup("<b>It's You</b>").openPopup();

            } else {
                alert("need to ask location permission and set userDeviceLocation localStorage Variable.");
            }
        } else {
            // Toggle the state
            isUserBusSet = false;

            // Reset to previous bounds or state
            polyline.setStyle({ weight: 0 });
            map.once("zoomend", function () {
                polyline.setStyle({ weight: 3 });
            });
            map.flyToBounds(polyline.getBounds(), { padding: [30, 30, 30, 30] });
            document.querySelector('.set-user-bus-button img').src = "../img/follow_user.png";
            shouldFollowMarker = false;

            if (userLocationMarker) {
                userLocationMarker.remove();
                userLocationMarker = null;
            }

        }
    }

    document.getElementById("refresh").addEventListener("click", function () {
        location.reload();
    });
    window.onload = function () {
        const infoBtn = document.getElementById("info-btn");

        const isFirstVisit = localStorage.getItem("visitedMapPage") === null;
        console.log("isFirstVisit:", isFirstVisit);


        if (isFirstVisit) {
            setTimeout(() => {
                infoBtn.classList.add("expanded");
                localStorage.setItem("visitedMapPage", "true");
            }, 400);
        }

        infoBtn.addEventListener("click", function () {
            infoBtn.classList.toggle("expanded");
        });

        if (localStorage.getItem('defaultBusStop')) {
            document.getElementById('bus-info-wrapper').style.display = 'block';
        }
        else {
            document.getElementById('speed-container').style.display = 'block';
        }
    };

</script>

<script src="../busMiss.js" defer></script>
<script src="../directionsToGoogleMap.js" defer></script>
<script src="map.js" defer></script>